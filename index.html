<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>昇任試験 学習アプリ</title>
<link rel="manifest" href="./manifest.webmanifest">
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', ()=> navigator.serviceWorker.register('./sw.js'));
}
</script>
</head>
<body>
<header>
  <h1>昇任試験 学習アプリ｜例規・文書管理・地方自治法・地方公務員法</h1>
</header>
<main>
  <section>
    <h2>設定／データ</h2>
    <label>モード</label>
    <select id="mode">
      <option value="past">過去問対策モード</option>
      <option value="random">ランダム対策モード</option>
      <option value="mockHalf">ハーフ模擬（60分/各科目半分）</option>
      <option value="wrong">誤答ノート</option>
    </select>
  </section>
  <section id="quiz-area">
    <p>ここに問題が表示されます。</p>
  </section>
</main>

<script>
(async function autoLoadHostedData(){
  if (localStorage.getItem('exam_questions_v1')) return;
  try {
    const q = await fetch('./data/questions.json', {cache:'no-store'});
    if (q.ok) {
      const questions = await q.json();
      window.QUESTIONS = questions;
      localStorage.setItem('exam_questions_v1', JSON.stringify(questions));
      console.log('Hosted questions.json loaded:', questions.length);
    }
  } catch(e){ console.warn(e); }

  try {
    const l = await fetch('./data/laws.json', {cache:'no-store'});
    if (l.ok) {
      const laws = await l.json();
      window.LAWS = laws;
      localStorage.setItem('exam_laws_v1', JSON.stringify(laws));
      console.log('Hosted laws.json loaded:', laws.length);
    }
  } catch(e){ console.warn(e); }
})();
</script>
</body>
</html>